{"version":3,"sources":["assets\\src\\gobang\\GobangBoard.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GobangScene } from \"./GobangScene\";\nimport { NONE, BLACK, WHITE } from \"./GobangConstants\";\nimport { GobangPiece } from \"./GobangPiece\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class GobangBoard extends cc.Component {\n\n    @property(cc.Integer)\n    private colsSum: number = 15;\n    @property(cc.Integer)\n    private rowsSum: number = 15;\n    @property(cc.Graphics)\n    private graphics: cc.Graphics = null; // 用来画棋盘棋子\n    @property(cc.Graphics)\n    private graphics2: cc.Graphics = null; // 用来画上层UI\n\n    private tileWidth: number = 0; // 一个方块的宽度\n    private startX: number = 0; // 棋盘左下角\n    private startY: number = 0;\n    private boardWidth: number = 0; // 棋盘节点宽高\n    private boardHeight: number = 0;\n    public pieceMap: Array<Array<GobangPiece>>;\n    public lastPiece: GobangPiece = null;\n\n    private gobangScene: GobangScene = null;\n\n    public init(gobangScene: GobangScene) {\n        this.gobangScene = gobangScene;\n\n        this.tileWidth = this.node.width / this.colsSum;\n        this.startX = this.tileWidth / 2;\n        this.startY = this.tileWidth / 2;\n        this.boardWidth = this.tileWidth * (this.colsSum - 1);\n        this.boardHeight = this.tileWidth * (this.rowsSum - 1);\n        this.reset();\n\n        this.addListeners();\n    }\n\n    public reset() {\n        this.graphics.clear();\n        this.graphics2.clear();\n        // 画棋盘\n        this.graphics.strokeColor = cc.Color.BLACK;\n        for (let x = 0; x < this.colsSum; x++) {\n            this.graphics.moveTo(this.startX + x * this.tileWidth, this.startY);\n            this.graphics.lineTo(this.startX + x * this.tileWidth, this.startY + this.boardHeight);\n            this.graphics.stroke();\n        }\n        for (let y = 0; y < this.rowsSum; y++) {\n            this.graphics.moveTo(this.startX, this.startY + y * this.tileWidth);\n            this.graphics.lineTo(this.startX + this.boardWidth, this.startY + y * this.tileWidth);\n            this.graphics.stroke();\n        }\n        // 中心点\n        this.graphics.strokeColor = cc.Color.RED;\n        this.graphics.fillColor = cc.Color.RED;\n        let centerCol = Math.floor(this.colsSum / 2);\n        let centerRow = Math.floor(this.rowsSum / 2);\n        this.graphics.circle(this.startX + centerCol * this.tileWidth, this.startY + centerRow * this.tileWidth, 5);\n        this.graphics.fill();\n\n        this.pieceMap = [];\n        for (let y = 0; y < this.rowsSum; y++) {\n            this.pieceMap[y] = [];\n            for (let x = 0; x < this.colsSum; x++) {\n                this.pieceMap[y][x] = new GobangPiece(x, y, NONE);\n            }\n        }\n    }\n\n    private drawLastPieceRect() {\n        this.graphics2.clear();\n        if (this.lastPiece) {\n            this.graphics2.strokeColor = cc.Color.RED;\n            this.graphics2.rect(this.startX + this.tileWidth * this.lastPiece.x - this.tileWidth / 2,\n                this.startY + this.tileWidth * this.lastPiece.y - this.tileWidth / 2,\n                this.tileWidth, this.tileWidth);\n            this.graphics2.stroke();\n        }\n    }\n\n    public placeBlack(coor: cc.Vec2) {\n        this.graphics.strokeColor = cc.Color.BLACK;\n        this.graphics.fillColor = cc.Color.BLACK;\n        this.graphics.circle(this.startX + coor.x * this.tileWidth, this.startY + coor.y * this.tileWidth, this.tileWidth * 0.45);\n        this.graphics.fill();\n        this.pieceMap[coor.x][coor.y] = new GobangPiece(coor.x, coor.y, BLACK);\n        this.lastPiece = this.pieceMap[coor.x][coor.y];\n        this.drawLastPieceRect();\n    }\n\n    public placeWhite(coor: cc.Vec2) {\n        this.graphics.strokeColor = cc.Color.WHITE;\n        this.graphics.fillColor = cc.Color.WHITE;\n        this.graphics.circle(this.startX + coor.x * this.tileWidth, this.startY + coor.y * this.tileWidth, this.tileWidth * 0.45);\n        this.graphics.fill();\n        this.pieceMap[coor.x][coor.y] = new GobangPiece(coor.x, coor.y, WHITE);\n        this.lastPiece = this.pieceMap[coor.x][coor.y];\n        this.drawLastPieceRect();\n    }\n\n    public getPieceByCoor(coor: cc.Vec2): GobangPiece {\n        return this.pieceMap[coor.x][coor.y];\n    }\n\n    private onTouched(event: cc.Event.EventTouch) {\n        let localPos = this.node.convertToNodeSpaceAR(event.getLocation());\n        let coor = this.getCoorByPos(localPos);\n        this.gobangScene.onBoardTouched(coor);\n    }\n\n    private getCoorByPos(pos: cc.Vec2): cc.Vec2 {\n        let touchCol = Math.round((pos.x - this.startX) / this.tileWidth);\n        let touchRow = Math.round((pos.y - this.startY) / this.tileWidth);\n        return cc.v2(touchCol, touchRow);\n    }\n\n    public judgeWin(): boolean {\n        //判断横向\n        let fiveCount = 0;\n        for (let x = 0; x < this.colsSum; x++) {\n            if (this.pieceMap[x][this.lastPiece.y].color === this.lastPiece.color) {\n                fiveCount++;\n                if (fiveCount === 5) {\n                    return true;\n                }\n            } else {\n                fiveCount = 0;\n            }\n        }\n        //判断纵向\n        fiveCount = 0;\n        for (let y = 0; y < this.rowsSum; y++) {\n            if (this.pieceMap[this.lastPiece.x][y].color === this.lastPiece.color) {\n                fiveCount++;\n                if (fiveCount == 5) {\n                    return true;\n                }\n            } else {\n                fiveCount = 0;\n            }\n        }\n        //判断右上斜向\n        let f = this.lastPiece.y - this.lastPiece.x;\n        fiveCount = 0;\n        for (let x = 0; x < this.colsSum; x++) {\n            if (f + x < 0 || f + x >= this.rowsSum) {\n                continue;\n            }\n            if (this.pieceMap[x][f + x].color === this.lastPiece.color) {\n                fiveCount++;\n                if (fiveCount == 5) {\n                    return true;\n                }\n            } else {\n                fiveCount = 0;\n            }\n        }\n        //判断右下斜向\n        f = this.lastPiece.y + this.lastPiece.x;\n        fiveCount = 0;\n        for (let x = 0; x < 15; x++) {\n            if (f - x < 0 || f - x >= this.rowsSum) {\n                continue;\n            }\n            if (this.pieceMap[x][f - x].color === this.lastPiece.color) {\n                fiveCount++;\n                if (fiveCount == 5) {\n                    return true;\n                }\n            } else {\n                fiveCount = 0;\n            }\n        }\n        return false;\n    }\n\n    private addListeners() {\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouched, this);\n    }\n\n    private removeListeners() {\n\n    }\n}"]}